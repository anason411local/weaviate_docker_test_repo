<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weaviate Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <script src="https://cdn.plot.ly/plotly-2.18.0.min.js"></script>
    <style>
        :root {
            --primary-color: #3f51b5;
            --secondary-color: #f50057;
            --bg-light: #f5f5f5;
            --text-dark: #333;
            --border-color: #e0e0e0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --info-color: #2196f3;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }
        
        .navbar {
            background-color: var(--primary-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: bold;
            color: white !important;
        }
        
        .card {
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 20px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        
        .card-header {
            font-weight: bold;
            background-color: rgba(63, 81, 181, 0.1);
            border-bottom: 1px solid rgba(63, 81, 181, 0.2);
        }
        
        .card-header.bg-info {
            background-color: var(--info-color) !important;
            color: white;
        }
        
        .stat-card {
            text-align: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
        }
        
        .stat-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 10px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #666;
            margin-top: 5px;
        }
        
        .stat-icon {
            font-size: 2rem;
            opacity: 0.2;
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-left-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .badge-class {
            background-color: var(--primary-color);
            color: white;
            padding: 0.5em 0.8em;
            border-radius: 5px;
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        .badge-count {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.4em 0.7em;
            border-radius: 30px;
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-danger {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-group .btn {
            margin-right: 2px;
        }
        
        .table {
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .table thead th {
            position: sticky;
            top: 0;
            background-color: white;
            z-index: 10;
            box-shadow: 0 2px 2px -1px rgba(0,0,0,0.1);
            padding: 12px 8px;
        }
        
        .class-row {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .class-row:hover {
            background-color: rgba(63, 81, 181, 0.08);
        }
        
        .class-row td {
            vertical-align: middle;
            padding: 12px 8px;
        }
        
        .inspection-badge {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
        
        .badge-running {
            background-color: #ff9800;
        }
        
        .badge-completed {
            background-color: #4caf50;
        }
        
        .badge-error {
            background-color: #f44336;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        
        .property-pill {
            background-color: rgba(63, 81, 181, 0.1);
            color: var(--primary-color);
            border: 1px solid rgba(63, 81, 181, 0.2);
            border-radius: 16px;
            padding: 4px 12px;
            margin: 4px;
            display: inline-block;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .property-pill:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .accordion-button {
            font-weight: 500;
        }
        
        .accordion-button:not(.collapsed) {
            background-color: rgba(63, 81, 181, 0.1);
            color: var(--primary-color);
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .progress {
            height: 20px;
            border-radius: 5px;
        }
        
        .progress-bar {
            text-align: center;
            line-height: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Docker container visualization styles */
        .gauge-container {
            height: 250px;
            margin-bottom: 15px;
        }
        
        .container-status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .container-status-indicator.online {
            background-color: #4CAF50;
            box-shadow: 0 0 5px #4CAF50;
        }
        
        .container-status-indicator.offline {
            background-color: #F44336;
            box-shadow: 0 0 5px #F44336;
        }
        
        .system-info {
            border-left: 4px solid #2196F3;
        }
        
        /* Tab styles */
        .nav-tabs .nav-link {
            color: #495057;
            border: 1px solid transparent;
            border-top-left-radius: 0.25rem;
            border-top-right-radius: 0.25rem;
            transition: all 0.2s ease;
        }
        
        .nav-tabs .nav-link:hover {
            color: var(--primary-color);
            border-color: #e9ecef #e9ecef #dee2e6;
            isolation: isolate;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            background-color: #fff;
            border-color: #dee2e6 #dee2e6 #fff;
            font-weight: 500;
        }
        
        /* Network and resource visualization */
        #dockerResourceTimeline, #dockerNetworkGraph {
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* Animation for refreshing data */
        @keyframes refreshRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .refresh-docker-btn:active i {
            animation: refreshRotate 0.5s linear;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-hdd-network"></i> Weaviate Dashboard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" id="dashboardLink">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="classesLink">Classes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="inspectionsLink">Inspections</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Dashboard Overview -->
        <div id="dashboardView">
            <h2>Database Overview</h2>
            <div class="row" id="statusRow">
                <div class="col-md-12">
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-info-circle"></i> Server Information
                        </div>
                        <div class="card-body">
                            <div id="serverInfo">
                                <div class="row">
                                    <div class="col-md-4">
                                        <p><strong>Status:</strong> <span id="serverStatus" class="badge bg-success">Ready</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p><strong>Version:</strong> <span id="serverVersion">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p><strong>Host:</strong> <span id="serverHost">-</span></p>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <h6>Modules:</h6>
                                        <div id="modulesInfo">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row" id="statsRow">
                <div class="col-md-6">
                    <div class="card stat-card">
                        <div class="stat-value" id="totalClasses">-</div>
                        <div class="stat-label">Collections</div>
                        <i class="bi bi-collection stat-icon"></i>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card stat-card">
                        <div class="stat-value" id="totalObjects">-</div>
                        <div class="stat-label">Total Objects</div>
                        <i class="bi bi-database stat-icon"></i>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-table"></i> Classes Overview
                            </div>
                            <div>
                                <button class="btn btn-sm btn-success" id="createClassBtn">
                                    <i class="bi bi-plus-circle"></i> Create Class
                                </button>
                                <button class="btn btn-sm btn-success" id="exportClassesBtn">
                                    <i class="bi bi-file-earmark-excel"></i> Export All Classes
                                </button>
                                <button class="btn btn-sm btn-primary" id="refreshBtn">
                                    <i class="bi bi-arrow-clockwise"></i> Refresh
                                </button>
                                <button class="btn btn-sm btn-primary" id="inspectBtn">
                                    <i class="bi bi-search"></i> Run Inspection
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="loading" id="classesLoading">
                                <div class="spinner"></div>
                            </div>
                            <div class="table-responsive" id="classesTableContainer" style="display: none;">
                                <table class="table table-hover" id="classesTable">
                                    <thead>
                                        <tr>
                                            <th>Class Name</th>
                                            <th>Objects</th>
                                            <th>Properties</th>
                                            <th>Vector Type</th>
                                            <th>Dimension</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="classesTableBody">
                                        <!-- Classes will be added here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Class Detail View -->
        <div id="classDetailView" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 id="classDetailTitle">Class Detail</h2>
                <button class="btn btn-outline-secondary" id="backToClassesBtn">
                    <i class="bi bi-arrow-left"></i> Back to Classes
                </button>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-info-circle"></i> Class Information
                        </div>
                        <div class="card-body">
                            <div class="loading" id="classDetailLoading">
                                <div class="spinner"></div>
                            </div>
                            <div id="classDetailInfo" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Objects Count:</strong> <span id="classObjectCount">-</span></p>
                                        <p><strong>Properties Count:</strong> <span id="classPropertyCount">-</span></p>
                                        <p><strong>Vector Type:</strong> <span id="classVectorType">-</span></p>
                                        <p><strong>Vector Dimension:</strong> <span id="classVectorDimension">-</span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>Storage Estimate:</strong> <span id="classStorageEstimate">-</span></p>
                                        <p><strong>Query Time:</strong> <span id="classQueryTime">-</span> ms</p>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <h6>Class or Collection Validity Check:</h6>
                                    <ul class="nav nav-tabs" id="analysisTypeTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="cosine-similarity-tab" data-bs-toggle="tab" data-bs-target="#cosine-similarity" type="button" role="tab" aria-controls="cosine-similarity" aria-selected="true">
                                                STS through Cosine
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="retrieval-metrics-tab" data-bs-toggle="tab" data-bs-target="#retrieval-metrics" type="button" role="tab" aria-controls="retrieval-metrics" aria-selected="false">
                                                Retrieval Metrics
                                            </button>
                                        </li>
                                    </ul>
                                    
                                    <!-- Tab content -->
                                    <div class="tab-content mt-3" id="analysisTypeContent">
                                        <!-- Cosine Similarity Tab -->
                                        <div class="tab-pane fade show active" id="cosine-similarity" role="tabpanel" aria-labelledby="cosine-similarity-tab">
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-text">Sample Size</span>
                                                        <input type="number" id="cosineSampleSize" class="form-control" value="100" min="10" max="10000">
                                                        <button class="btn btn-primary" id="runCosineSimilarityBtn">
                                                            <i class="bi bi-play-fill"></i> Analyze
                                                        </button>
                                                    </div>
                                                    <small class="form-text text-muted">Number of objects to sample for analysis (10-10000).</small>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <div class="alert alert-info">
                                                        <h6><i class="bi bi-info-circle"></i> About STS through Cosine</h6>
                                                        <p class="mb-1">This analysis evaluates semantic similarity distribution:</p>
                                                        <ul class="mb-0 small">
                                                            <li><b>Cosine Similarity</b>: Measures how similar vectors are regardless of magnitude</li>
                                                            <li><b>Distribution</b>: Reveals how semantic relationships are clustered</li>
                                                            <li><b>Statistics</b>: Quantifies average/median similarities across document pairs</li>
                                                        </ul>
                                                        <p class="mt-2 mb-0 small"><i>Higher similarity between unrelated documents may indicate poor embedding quality or overlapping vector space.</i></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="cosineSimilarityResults" style="display: none;">
                                                <h6>Cosine Similarity Analysis:</h6>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="alert alert-info" id="cosineInfo"></div>
                                                    </div>
                                                </div>
                                                <div class="row mb-4">
                                                    <div class="col-md-12">
                                                        <div id="cosineHistogramPlot" style="height: 400px;"></div>
                                                    </div>
                                                </div>
                                                <div class="row mb-4">
                                                    <div class="col-md-12">
                                                        <div id="cosineDistributionPlot" style="height: 400px;"></div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h6>Statistics:</h6>
                                                        <div class="table-responsive">
                                                            <table class="table table-sm table-bordered" id="cosineStatsTable">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Metric</th>
                                                                        <th>Value</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <!-- Stats will be added here -->
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Retrieval Metrics Tab -->
                                        <div class="tab-pane fade" id="retrieval-metrics" role="tabpanel" aria-labelledby="retrieval-metrics-tab">
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label for="retrievalQuery">Search Query</label>
                                                        <input type="text" id="retrievalQuery" class="form-control" placeholder="Enter a search query">
                                                        <small class="form-text text-muted">Query to evaluate retrieval metrics for.</small>
                                                    </div>
                                                    
                                                    <div class="form-group mb-3">
                                                        <label for="retrievalMaxK">Max K Value</label>
                                                        <input type="number" id="retrievalMaxK" class="form-control" value="10" min="1" max="100">
                                                        <small class="form-text text-muted">Maximum k value for metrics calculation (1-100).</small>
                                                    </div>

                                                    <button id="runRetrievalMetricsBtn" class="btn btn-primary">
                                                        <i class="bi bi-play-fill"></i> Analyze Retrieval Metrics
                                                    </button>
                                                    <small class="d-block mt-2 text-muted">Note: Relevant documents will be automatically simulated for demonstration purposes.</small>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <div class="alert alert-info">
                                                        <h6><i class="bi bi-info-circle"></i> About Retrieval Metrics</h6>
                                                        <p class="mb-1">This analysis evaluates search quality using:</p>
                                                        <ul class="mb-0 small">
                                                            <li><b>Precision@k</b>: Fraction of retrieved documents that are relevant</li>
                                                            <li><b>Recall@k</b>: Fraction of relevant documents that are retrieved</li>
                                                            <li><b>F1 Score@k</b>: Harmonic mean of precision and recall</li>
                                                        </ul>
                                                        <p class="mt-2 mb-0 small"><i>For demonstration, a subset of results will be randomly selected as "relevant" with a fixed seed for reproducibility.</i></p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div id="retrievalMetricsResults" style="display: none;">
                                                <div id="retrievalInfo" class="alert alert-info my-3"></div>
                                                
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <div class="card mb-3">
                                                            <div class="card-header">Metrics at K</div>
                                                            <div class="card-body">
                                                                <div id="retrievalMainPlot" style="height: 400px;"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="card mb-3">
                                                            <div class="card-header">Overview</div>
                                                            <div class="card-body">
                                                                <div id="retrievalRadarPlot" style="height: 400px;"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="card mb-3">
                                                            <div class="card-header">Comparison at Key K Values</div>
                                                            <div class="card-body">
                                                                <div id="retrievalBarPlot" style="height: 300px;"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="card mb-3">
                                                            <div class="card-header">Metrics Heatmap</div>
                                                            <div class="card-body">
                                                                <div id="retrievalHeatmapPlot" style="height: 300px;"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="col-12">
                                                        <div class="card mb-3">
                                                            <div class="card-header">Document Relevance</div>
                                                            <div class="card-body">
                                                                <div id="retrievalDocsPlot" style="height: 300px;"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <h6>Properties:</h6>
                                    <div id="classProperties">
                                        <!-- Properties will be added here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-search"></i> Query Class
                            </div>
                            <div>
                                <small class="text-muted">Results can be opened in a new tab</small>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="queryForm" class="mb-3">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="queryText" placeholder="Enter your query...">
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="queryType">
                                            <option value="vector">Vector Search</option>
                                            <option value="keyword">Keyword Search</option>
                                            <option value="combined">Combined Search</option>
                                            <option value="gemini">Gemini AI</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button type="submit" class="btn btn-primary w-100" id="runQueryBtn">
                                            <i class="bi bi-search"></i> Search
                                        </button>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <span class="input-group-text">Limit</span>
                                            <input type="number" class="form-control" id="queryLimit" value="5" min="1" max="20">
                                        </div>
                                    </div>
                                </div>
                            </form>
                            
                            <div id="queryResults" style="display: none;">
                                <h5>Search Results</h5>
                                <div class="alert alert-info" id="queryInfo"></div>
                                <div id="queryResultsContainer"></div>
                            </div>
                            
                            <div class="loading" id="queryLoading" style="display: none;">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-collection"></i> Sample Objects
                            </div>
                            <div>
                                <button class="btn btn-sm btn-primary" id="viewAllObjectsBtn">
                                    <i class="bi bi-list-ul"></i> View All Objects
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="sampleObjectsContainer">
                                <!-- Sample objects will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Inspections View -->
        <div id="inspectionsView" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Inspection Reports</h2>
                <button class="btn btn-primary" id="newInspectionBtn">
                    <i class="bi bi-plus-circle"></i> New Inspection
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-list-check"></i> Inspection History
                </div>
                <div class="card-body">
                    <div class="loading" id="inspectionsLoading">
                        <div class="spinner"></div>
                    </div>
                    <div class="table-responsive" id="inspectionsTableContainer" style="display: none;">
                        <table class="table table-hover" id="inspectionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Timestamp</th>
                                    <th>Status</th>
                                    <th>Collections</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inspectionsTableBody">
                                <!-- Inspections will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Class Modal -->
    <div class="modal fade" id="deleteClassModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Delete Class</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete the class <strong id="deleteClassName"></strong>?</p>
                    <p class="text-danger"><strong>Warning:</strong> This action cannot be undone and will delete all objects in this class.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Inspection Modal -->
    <div class="modal fade" id="newInspectionModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">New Inspection</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="includeSamplesCheck">
                        <label class="form-check-label" for="includeSamplesCheck">
                            Include Sample Objects
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="runBenchmarksCheck">
                        <label class="form-check-label" for="runBenchmarksCheck">
                            Run Performance Benchmarks
                        </label>
                    </div>
                    <p class="text-muted small">Note: Including samples and running benchmarks will make the inspection take longer but provide more detailed information.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="startInspectionBtn">Start Inspection</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Class Modal -->
    <div class="modal fade" id="newClassModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Class</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="newClassForm">
                        <!-- Class Name -->
                        <div class="mb-3">
                            <label for="className" class="form-label">Class Name</label>
                            <input type="text" class="form-control" id="newClassName" placeholder="Enter class name (CamelCase recommended)" required>
                            <div class="form-text">Class names should use CamelCase (e.g., 'PDFDocuments', 'ProductCatalog')</div>
                        </div>
                        
                        <!-- Class Description -->
                        <div class="mb-3">
                            <label for="classDescription" class="form-label">Description (optional)</label>
                            <textarea class="form-control" id="classDescription" rows="2" placeholder="Enter class description"></textarea>
                        </div>
                        
                        <!-- Vectorizer -->
                        <div class="mb-3">
                            <label for="vectorizer" class="form-label">Vectorizer</label>
                            <select class="form-select" id="vectorizer">
                                <option value="none">None (manual vectors)</option>
                                <option value="text2vec-transformers">text2vec-transformers</option>
                                <option value="text2vec-openai">text2vec-openai</option>
                                <option value="text2vec-cohere">text2vec-cohere</option>
                            </select>
                            <div class="form-text">The vectorizer determines how objects are converted to vectors</div>
                        </div>
                        
                        <!-- Vector Dimension -->
                        <div class="mb-3">
                            <label for="vectorDimension" class="form-label">Vector Dimension</label>
                            <input type="number" class="form-control" id="vectorDimension" value="768" min="2" max="4096">
                            <div class="form-text">The dimension of your vectors (e.g., 768 for BERT, 1536 for OpenAI)</div>
                        </div>
                        
                        <hr>
                        
                        <!-- Properties Section -->
                        <h6>Properties <button type="button" class="btn btn-sm btn-outline-primary" id="addPropertyBtn"><i class="bi bi-plus"></i> Add Property</button></h6>
                        
                        <div id="propertiesContainer">
                            <!-- Properties will be added here dynamically -->
                            <div class="property-row mb-3 border p-3 rounded">
                                <div class="row g-2">
                                    <div class="col-md-4">
                                        <label class="form-label">Name</label>
                                        <input type="text" class="form-control property-name" placeholder="e.g., text, title, content" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Data Type</label>
                                        <select class="form-select property-datatype">
                                            <option value="text">text</option>
                                            <option value="string">string</option>
                                            <option value="int">int</option>
                                            <option value="number">number</option>
                                            <option value="boolean">boolean</option>
                                            <option value="date">date</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Index</label>
                                        <select class="form-select property-index">
                                            <option value="true">Yes</option>
                                            <option value="false">No</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1 d-flex align-items-end">
                                        <button type="button" class="btn btn-sm btn-outline-danger remove-property-btn"><i class="bi bi-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <label class="form-label">Description (optional)</label>
                                    <input type="text" class="form-control property-description" placeholder="Property description">
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-info mt-3">
                            <i class="bi bi-info-circle"></i> Recommended properties for document storage:
                            <ul class="mb-0 mt-1">
                                <li><strong>text</strong> (text) - Main content of the document</li>
                                <li><strong>source</strong> (string) - Source information</li>
                                <li><strong>filename</strong> (string) - Original filename</li>
                                <li><strong>page</strong> (int) - Page number for multi-page documents</li>
                            </ul>
                        </div>
                    </form>
                    <div class="alert alert-danger" id="createClassError" style="display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="createClassSubmitBtn">Create Class</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Class Modal - Fix the property inputs -->
    <div class="modal fade" id="updateClassModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Update Collection Configuration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-4">
                        <i class="bi bi-info-circle"></i> Note: Weaviate only supports updating certain configuration aspects of existing collections. You can update vectorizer settings and index configurations, but you cannot change or remove existing properties. You can add new properties.
                    </div>
                    <form id="updateClassForm">
                        <div class="mb-3">
                            <label for="updateClassName" class="form-label">Collection Name</label>
                            <input type="text" class="form-control" id="updateClassName" disabled>
                        </div>
                        
                        <h5>Vector Configuration</h5>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="updateVectorizer" class="form-label">Vectorizer</label>
                                <select class="form-control" id="updateVectorizer">
                                    <option value="none">None (Bring your own vectors)</option>
                                    <option value="text2vec-contextionary">text2vec-contextionary</option>
                                    <option value="text2vec-transformers">text2vec-transformers</option>
                                    <option value="text2vec-openai">text2vec-openai</option>
                                    <option value="text2vec-cohere">text2vec-cohere</option>
                                    <option value="text2vec-huggingface">text2vec-huggingface</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="updateVectorDimension" class="form-label">Vector Dimension</label>
                                <input type="number" class="form-control" id="updateVectorDimension" min="2" max="4096">
                            </div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="updateVectorizeClassName">
                            <label class="form-check-label" for="updateVectorizeClassName">
                                Vectorize Collection Name
                            </label>
                        </div>
                        
                        <h5>Vector Index Configuration</h5>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="updateDistanceMetric" class="form-label">Distance Metric</label>
                                <select class="form-control" id="updateDistanceMetric">
                                    <option value="cosine">Cosine (similarity)</option>
                                    <option value="dot">Dot Product</option>
                                    <option value="l2-squared">L2 Squared (distance)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="updateMaxConnections" class="form-label">Max Connections</label>
                                <input type="number" class="form-control" id="updateMaxConnections" placeholder="Default: 64">
                            </div>
                            <div class="col-md-4">
                                <label for="updateEfConstruction" class="form-label">EF Construction</label>
                                <input type="number" class="form-control" id="updateEfConstruction" placeholder="Default: 128">
                            </div>
                        </div>
                        
                        <!-- Container for existing properties and adding new ones -->
                        <div id="updatePropContainer"></div>
                        
                        <!-- Success and error messages -->
                        <div class="alert alert-success mt-3" id="updateClassSuccess" style="display: none;"></div>
                        <div class="alert alert-danger mt-3" id="updateClassError" style="display: none;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="updateClassSubmitBtn">Update Collection</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Docker Login Modal -->
    <div class="modal fade" id="dockerLoginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Docker Authentication</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> Docker commands require sudo privileges. Please enter your system username and password.
                    </div>
                    <form id="dockerLoginForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="alert alert-danger" id="loginError" style="display: none;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="submitLoginBtn">Login</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/dashboard.js"></script>
</body>
</html> 